<div class="container">
    <form [formGroup]="myForm" (ngSubmit)="validarFormulario()" novalidate>
        <div class="row">
            <div class="col-lg-4">
                <div class="card-body">
                    <h5 style="text-align: center;">{{ nuevaPersona }}</h5>
                    <mat-form-field class="example-full-width">
                        <input matInput type="text" formControlName="_nombres" placeholder="Ingrese Nombres"
                            (keyup)="onChangeInputNombres()">
                    </mat-form-field>
                    <div class="badge badge-danger mb-3 btn-block"
                        *ngIf="_nombres.invalid && (_nombres.dirty || _nombres.touched)">
                        <div *ngIf="_nombres.errors.required">
                            Nombres Requeridos
                        </div>
                    </div>
                    <div class="badge badge-danger mb-3 btn-block" [hidden]="inputNombres">
                        Necesita dos Nombres
                    </div>
                    <mat-form-field class="example-full-width">
                        <input matInput type="text" formControlName="_apellidos" placeholder="Ingrese Apellidos"
                            (keyup)="onChangeInputApellidos()">
                    </mat-form-field>
                    <div class="badge badge-danger mb-3 btn-block"
                        *ngIf="_apellidos.invalid && (_apellidos.dirty || _apellidos.touched)">
                        <div *ngIf="_apellidos.errors.required">
                            Apellidos Requeridos
                        </div>
                    </div>
                    <div class="badge badge-danger mb-3 btn-block" [hidden]="inputApellidos">
                        Necesita dos Apellidos
                    </div>

                    <mat-form-field class="example-full-width">
                        <mat-label>Seleccione Tipo Documento</mat-label>
                        <mat-select [(ngModel)]="tipoDocumento" [ngModelOptions]="{standalone: true}"
                            (selectionChange)="onChangeSelectTipoDocumento($event)">
                            <mat-option *ngFor="let item of tipoDocumentos" [value]="item.IdTipoDocumento">
                                {{item.Documento}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <div class="badge badge-danger mb-3 btn-block" [hidden]="selectTipoDocumento">
                        Tipo Documento Requerido
                    </div>
                    <mat-form-field class="example-full-width">
                        <input matInput type="number" formControlName="_numeroDocumento" (keyup)="onChangeInputCedula()"
                            placeholder="Ingrese Número Documento">
                    </mat-form-field>
                    <div class="badge badge-danger mb-3 btn-block"
                        *ngIf="_numeroDocumento.invalid && (_numeroDocumento.dirty || _numeroDocumento.touched)">
                        <div *ngIf="_numeroDocumento.errors.required">
                            Número de Documento Requerido
                        </div>
                    </div>
                    <div class="badge badge-danger mb-3 btn-block" [hidden]="inputCedula">
                        Cédula Ya Existe
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="card-body">
                    <h5 style="text-align: center;">{{ contacto }}</h5>
                    <mat-form-field class="example-full-width">
                        <input matInput type="number" formControlName="_telefono1" placeholder="Primer Telefono">
                    </mat-form-field>
                    <div class="badge badge-danger mb-3 btn-block"
                        *ngIf="_telefono1.invalid && (_telefono1.dirty || _telefono1.touched)">
                        <div *ngIf="_telefono1.errors.required">
                            Primer Telefono Requerido
                        </div>
                    </div>
                    <mat-form-field class="example-full-width">
                        <mat-label>Tipo Telefono</mat-label>
                        <mat-select [(ngModel)]="tipoTelefono1" [ngModelOptions]="{standalone: true}"
                            (selectionChange)="onChangeSelectTipoTelefono1($event.value)">
                            <mat-option *ngFor="let item of tipoTelefonos" [value]="item.IdTipoTelefono">
                                {{item.Descripcion}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <div class="badge badge-danger mb-3 btn-block" [hidden]="selectTipoTelefono1">
                        Tipo Telefono Requerido
                    </div>
                    <mat-form-field class="example-full-width">
                        <input matInput type="number" formControlName="_telefono2" placeholder="Segundo Telefono">
                    </mat-form-field>
                    <div class="badge badge-danger mb-3 btn-block"
                        *ngIf="_telefono2.invalid && (_telefono2.dirty || _telefono2.touched)">
                        <div *ngIf="_telefono2.errors.required">
                            Segundo Telefono Requerido
                        </div>
                    </div>
                    <mat-form-field class="example-full-width">
                        <mat-label>Tipo Telefono</mat-label>
                        <mat-select [(ngModel)]="tipoTelefono2" [ngModelOptions]="{standalone: true}"
                            (selectionChange)="onChangeSelectTipoTelefono2($event.value)">
                            <mat-option *ngFor="let item of tipoTelefonos" [value]="item.IdTipoTelefono">
                                {{item.Descripcion}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <div class="badge badge-danger mb-3 btn-block" [hidden]="selectTipoTelefono2">
                        Tipo Telefono Requerido
                    </div>
                    <mat-form-field class="example-full-width">
                        <input matInput type="email" [(ngModel)]="correo" [ngModelOptions]="{standalone: true}"
                            placeholder="Ingrese Correo">
                    </mat-form-field>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="card-body">
                    <h5 style="text-align: center;">{{ direccion }}</h5>
                    <mat-form-field class="example-full-width">
                        <mat-label>Seleccionar Provincia</mat-label>
                        <mat-select [(ngModel)]="provincia" [ngModelOptions]="{standalone: true}"
                            (selectionChange)="cantonesDeUnaProvincia($event.value)">
                            <mat-option *ngFor="let item of provincias" [value]="item.IdProvincia">
                                {{item.Descripcion}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <div class="badge badge-danger mb-3 btn-block" [hidden]="selectProvincia">
                        Provincia Requerida
                    </div>
                    <mat-form-field class="example-full-width">
                        <mat-label>Seleccionar Cantón</mat-label>
                        <mat-select [(ngModel)]="canton" [ngModelOptions]="{standalone: true}"
                            (selectionChange)="parroquiasDeUnCanton($event.value)">
                            <mat-option *ngFor="let item of cantones" [value]="item.IdCanton">
                                {{item.Descripcion}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <div class="badge badge-danger mb-3 btn-block" [hidden]="selectCanton">
                        Cantón Requerido
                    </div>

                    <mat-form-field class="example-full-width">
                        <mat-label>Seleccionar Parroquia</mat-label>
                        <mat-select [(ngModel)]="parroquia" [ngModelOptions]="{standalone: true}"
                            (selectionChange)="onChangeSelectParroquia($event.value)">
                            <mat-option *ngFor="let item of parroquias" [value]="item.IdParroquia">
                                {{item.Descripcion}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <div class="badge badge-danger mb-3 btn-block" [hidden]="selectParroquia">
                        Parroquia Requerida
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div>
                    <button type="submit" class="btn btn-success btn-block" [value]="botonInsertar"
                        #testButton>Guardar</button>
                </div>
            </div>
        </div>
    </form>
    <br>
    <div class="row">
        <div class="col-lg-12">
            <div class="card-body mat-elevation-z5">
                <mat-form-field class="example-full-width">
                    <input matInput [(ngModel)]="filterPersona" type="text" placeholder="Buscar Persona">
                    <button mat-button matPrefix mat-icon-button>
                        <mat-icon>search</mat-icon>
                    </button>
                </mat-form-field>
                <div class="tablaPersonas">
                    <table mat-table
                        [dataSource]="personas|filter:filterPersona:'PrimerNombre':'SegundoNombre':'ApellidoPaterno':'ApellidoMaterno':'NumeroDocumento'">
                        <ng-container matColumnDef="nombres">
                            <th mat-header-cell *matHeaderCellDef> Nombres </th>
                            <td mat-cell *matCellDef="let element"> {{ element.PrimerNombre }}
                                {{ element.SegundoNombre }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="apellidos">
                            <th mat-header-cell *matHeaderCellDef> Apellidos </th>
                            <td mat-cell *matCellDef="let element"> {{ element.ApellidoPaterno }}
                                {{ element.ApellidoMaterno }} </td>
                        </ng-container>
                        <ng-container matColumnDef="documento">
                            <th mat-header-cell *matHeaderCellDef> Documento </th>
                            <td mat-cell *matCellDef="let element"> {{ element.TipoDocumento }} </td>
                        </ng-container>
                        <ng-container matColumnDef="numeroDocumento">
                            <th mat-header-cell *matHeaderCellDef> No. Documento </th>
                            <td mat-cell *matCellDef="let element"> {{element.NumeroDocumento}} </td>
                        </ng-container>
                        <ng-container matColumnDef="acciones">
                            <th colspan="3" mat-header-cell *matHeaderCellDef> Acciones </th>
                            <ng-container *matCellDef="let element">
                                <ng-container *ngIf="element.IdUsuario == ''">
                                    <td mat-cell>
                                        <button tooltip="Ver Información" placement="top"
                                            class="btn btn-sm btn-outline-primary" (click)="abrirModal(element)">
                                            <i class="fa fa-eye" aria-hidden="true"></i>
                                        </button>
                                    </td>
                                    <td mat-cell>
                                        <button tooltip="Modificar" placement="top" class="btn btn-sm btn-outline-info"
                                            (click)="mostrarPersona(element)">
                                            <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                        </button>
                                    </td>
                                    <td mat-cell>
                                        <button tooltip="Eliminar" placement="top" class="btn btn-sm btn-outline-danger"
                                            (click)="eliminarPersona(element.IdPersona)">
                                            <i class="fa fa-trash" aria-hidden="true"></i>
                                        </button>
                                    </td>
                                </ng-container>
                                <ng-container *ngIf="element.IdUsuario != ''">
                                    <td mat-cell>
                                        <button tooltip="Ver Información" placement="top"
                                            class="btn btn-sm btn-outline-primary" (click)="abrirModal(element)">
                                            <i class="fa fa-eye" aria-hidden="true"></i>
                                        </button>
                                    </td>
                                    <td mat-cell>
                                        <button tooltip="Modificar" placement="top" class="btn btn-sm btn-outline-info"
                                            (click)="mostrarPersona(element)">
                                            <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                        </button>
                                    </td>
                                </ng-container>
                            </ng-container>
                        </ng-container>
                        <tr mat-header-row *matHeaderRowDef="tablaPersonas; sticky: true"></tr>
                        <tr mat-row *matRowDef="let row; columns: tablaPersonas;"></tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>